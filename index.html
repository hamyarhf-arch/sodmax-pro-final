<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>SODmAX Pro | Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ø­Ø±ÙÙ‡â€ŒØ§ÛŒ Ø¨Ø§ Ù¾Ø§Ø¯Ø§Ø´ USDT</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
    
    <style>
        :root {
            --primary: #0066FF;
            --primary-dark: #0052CC;
            --primary-light: #3395FF;
            --secondary: #00D4AA;
            --accent: #FF6B35;
            --usdt: #26A17B;
            --eth: #627EEA;
            --btc: #F7931A;
            --dark: #0A0F1C;
            --darker: #050914;
            --card: #121828;
            --card-hover: #1A233F;
            --text: #FFFFFF;
            --text-secondary: #94A3B8;
            --success: #00C853;
            --warning: #FFB300;
            --error: #FF3D00;
            --gradient: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            --gradient-dark: linear-gradient(135deg, var(--primary-dark) 0%, #00B894 100%);
            --gradient-usdt: linear-gradient(135deg, var(--usdt) 0%, #00D4AA 100%);
            --gradient-btc: linear-gradient(135deg, var(--btc) 0%, #FFD166 100%);
            --gradient-eth: linear-gradient(135deg, var(--eth) 0%, #8B5CF6 100%);
            --shadow: 0 10px 20px rgba(0, 0, 0, 0.3);
            --shadow-lg: 0 15px 30px rgba(0, 0, 0, 0.4);
            --shadow-primary: 0 5px 15px rgba(0, 102, 255, 0.3);
            --glass: rgba(255, 255, 255, 0.05);
            --glass-border: rgba(255, 255, 255, 0.1);
            --radius: 12px;
            --radius-lg: 16px;
            --radius-xl: 20px;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Inter', sans-serif;
            -webkit-tap-highlight-color: transparent;
        }

        html {
            font-size: 14px;
        }

        body {
            background: var(--dark);
            color: var(--text);
            min-height: 100vh;
            overflow-x: hidden;
            background-image: 
                radial-gradient(circle at 10% 20%, rgba(0, 102, 255, 0.15) 0%, transparent 40%),
                radial-gradient(circle at 90% 80%, rgba(0, 212, 170, 0.15) 0%, transparent 40%),
                radial-gradient(circle at 50% 50%, rgba(255, 107, 53, 0.1) 0%, transparent 60%);
            touch-action: manipulation;
        }

        /* Ø¨Ù‡ÛŒÙ†Ù‡â€ŒØ³Ø§Ø²ÛŒ Ø¨Ø±Ø§ÛŒ ØªØ§Ú† */
        button, .btn, .miner-core {
            touch-action: manipulation;
            -webkit-touch-callout: none;
            -webkit-user-select: none;
            user-select: none;
        }

        /* Ú©Ø§Ù†ØªÛŒÙ†Ø± Ø§ØµÙ„ÛŒ */
        .container {
            max-width: 100%;
            margin: 0 auto;
            padding: 0 16px;
            position: relative;
            z-index: 1;
        }

        /* ØµÙØ­Ù‡ Ø«Ø¨Øª Ù†Ø§Ù… */
        .register-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(5, 9, 20, 0.95);
            backdrop-filter: blur(20px);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 2000;
            padding: 20px;
        }

        .register-container {
            background: linear-gradient(145deg, var(--card) 0%, rgba(18, 24, 40, 0.95) 100%);
            border: 1px solid var(--glass-border);
            border-radius: var(--radius-xl);
            padding: 32px 24px;
            width: 100%;
            max-width: 400px;
            position: relative;
            overflow: hidden;
            box-shadow: var(--shadow-lg);
        }

        .register-header {
            text-align: center;
            margin-bottom: 32px;
        }

        .register-icon {
            width: 80px;
            height: 80px;
            background: var(--gradient);
            border-radius: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 20px;
            font-size: 36px;
            color: white;
            box-shadow: var(--shadow-primary);
        }

        .register-title {
            font-size: 28px;
            font-weight: 900;
            background: var(--gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 8px;
            letter-spacing: -0.5px;
        }

        .register-subtitle {
            color: var(--text-secondary);
            font-size: 14px;
            line-height: 1.5;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-label {
            display: block;
            color: var(--text-secondary);
            font-size: 13px;
            font-weight: 600;
            margin-bottom: 8px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .form-input {
            width: 100%;
            padding: 14px 16px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid var(--glass-border);
            border-radius: var(--radius);
            color: white;
            font-size: 14px;
            transition: all 0.3s ease;
        }

        .form-input:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(0, 102, 255, 0.1);
        }

        .btn {
            padding: 14px 20px;
            border-radius: 10px;
            border: none;
            font-size: 14px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            text-decoration: none;
            letter-spacing: 0.3px;
            position: relative;
            overflow: hidden;
            white-space: nowrap;
            width: 100%;
            min-height: 48px;
            -webkit-appearance: none;
            appearance: none;
        }

        .btn-primary {
            background: var(--gradient);
            color: white;
            box-shadow: var(--shadow-primary);
        }

        .btn:active {
            transform: scale(0.96);
        }

        .btn-success {
            background: var(--gradient-usdt);
            color: white;
            box-shadow: 0 5px 15px rgba(38, 161, 123, 0.3);
        }

        .btn-warning {
            background: linear-gradient(135deg, var(--warning) 0%, #FF9800 100%);
            color: white;
            box-shadow: 0 5px 15px rgba(255, 179, 0, 0.3);
        }

        .btn-outline {
            background: transparent;
            border: 2px solid var(--glass-border);
            color: white;
        }

        .btn-outline:active {
            border-color: var(--primary);
            background: rgba(0, 102, 255, 0.1);
        }
        
        /* Ù†Ø§ÙˆØ¨Ø±ÛŒ Ù…ÙˆØ¨Ø§ÛŒÙ„ */
        .navbar {
            display: flex;
            flex-direction: column;
            gap: 16px;
            padding: 16px 0;
            margin-bottom: 24px;
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        .nav-background {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(10, 15, 28, 0.98);
            backdrop-filter: blur(15px);
            -webkit-backdrop-filter: blur(15px);
            border-bottom: 1px solid var(--glass-border);
            z-index: -1;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 12px;
            text-decoration: none;
            padding: 0 8px;
        }

        .logo-icon {
            width: 48px;
            height: 48px;
            background: var(--gradient);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            font-weight: 900;
            color: white;
            position: relative;
            overflow: hidden;
            box-shadow: var(--shadow-primary);
            flex-shrink: 0;
        }

        .logo-text {
            display: flex;
            flex-direction: column;
            flex: 1;
        }

        .logo-title {
            font-size: 22px;
            font-weight: 900;
            background: var(--gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            letter-spacing: -0.5px;
            line-height: 1;
        }

        .logo-subtitle {
            font-size: 11px;
            color: var(--text-secondary);
            font-weight: 500;
            letter-spacing: 0.5px;
            text-transform: uppercase;
            margin-top: 4px;
        }

        /* Ù…Ù†ÙˆÛŒ navigation */
        .nav-menu {
            display: flex;
            gap: 10px;
            align-items: center;
            margin-right: 15px;
            flex-wrap: wrap;
            justify-content: center;
            padding: 0 8px;
        }

        .nav-menu a {
            color: white;
            text-decoration: none;
            padding: 6px 12px;
            border-radius: 6px;
            font-size: 12px;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 5px;
            transition: all 0.3s ease;
        }

        .nav-menu a:nth-child(1) { background: rgba(0,102,255,0.3); }
        .nav-menu a:nth-child(2) { background: rgba(255,107,53,0.3); }
        .nav-menu a:nth-child(3) { background: rgba(0,212,170,0.3); }
        .nav-menu a:nth-child(4) { background: rgba(148,163,184,0.3); }

        .nav-menu a:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .nav-text {
            display: inline;
        }

        .wallet-section {
            display: flex;
            flex-direction: column;
            gap: 12px;
            width: 100%;
            padding: 0 8px;
        }

        .wallet-row {
            display: flex;
            gap: 12px;
            width: 100%;
        }

        .wallet-card {
            background: linear-gradient(145deg, var(--card) 0%, rgba(18, 24, 40, 0.8) 100%);
            border: 1px solid var(--glass-border);
            border-radius: var(--radius);
            padding: 16px;
            flex: 1;
            min-width: 0;
            backdrop-filter: blur(10px);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .wallet-card:active {
            transform: scale(0.98);
        }

        .wallet-label {
            font-size: 11px;
            color: var(--text-secondary);
            font-weight: 600;
            margin-bottom: 8px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .wallet-amount {
            font-size: 20px;
            font-weight: 800;
            color: white;
            display: flex;
            align-items: baseline;
            gap: 6px;
            line-height: 1;
        }

        /* Ù…Ø§ÛŒÙ†Ø± Ø§ØµÙ„ÛŒ */
        .miner-section {
            margin: 40px 0 60px;
        }

        .section-header {
            text-align: center;
            margin-bottom: 32px;
            padding: 0 8px;
        }

        .section-title {
            font-size: 28px;
            font-weight: 900;
            background: var(--gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 12px;
            line-height: 1.2;
            letter-spacing: -0.5px;
        }

        .section-subtitle {
            font-size: 14px;
            color: var(--text-secondary);
            line-height: 1.5;
            padding: 0 4px;
        }

        .highlight {
            color: var(--primary-light);
            font-weight: 600;
        }

        .miner-container {
            display: flex;
            flex-direction: column;
            gap: 32px;
            margin-bottom: 40px;
        }

        .miner-view {
            background: linear-gradient(145deg, var(--card) 0%, rgba(18, 24, 40, 0.9) 100%);
            border-radius: var(--radius-xl);
            padding: 24px 16px;
            border: 1px solid var(--glass-border);
            backdrop-filter: blur(20px);
            position: relative;
            overflow: hidden;
            box-shadow: var(--shadow-lg);
        }

        .miner-view::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: var(--gradient);
            z-index: 1;
        }

        .miner-display {
            position: relative;
            width: 100%;
            height: 280px;
            margin: 24px 0;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .miner-core {
            width: 220px;
            height: 220px;
            background: linear-gradient(145deg, #0D1428 0%, #121828 100%);
            border-radius: 50%;
            position: relative;
            cursor: pointer;
            border: 2px solid transparent;
            overflow: hidden;
            transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 
                inset 0 0 40px rgba(0, 102, 255, 0.1),
                0 10px 30px rgba(0, 0, 0, 0.5);
            -webkit-tap-highlight-color: transparent;
        }

        .miner-core:active {
            transform: scale(0.95);
            box-shadow: 
                inset 0 0 60px rgba(0, 102, 255, 0.2),
                0 15px 40px rgba(0, 102, 255, 0.3);
        }

        .core-inner {
            position: absolute;
            inset: 2px;
            background: linear-gradient(145deg, #0D1428 0%, #121828 100%);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1;
        }

        .core-content {
            text-align: center;
            z-index: 2;
            padding: 20px;
        }

        .core-icon {
            font-size: 48px;
            margin-bottom: 16px;
            background: var(--gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            filter: drop-shadow(0 4px 12px rgba(0, 102, 255, 0.3));
            animation: pulse 2s ease-in-out infinite;
        }

        .click-reward {
            font-size: 24px;
            font-weight: 900;
            color: white;
            margin-bottom: 8px;
            text-shadow: 0 4px 20px rgba(0, 102, 255, 0.5);
        }

        .click-label {
            font-size: 14px;
            color: var(--text-secondary);
            letter-spacing: 0.5px;
            text-transform: uppercase;
        }

        .miner-controls {
            display: flex;
            flex-direction: column;
            gap: 12px;
            margin-top: 24px;
        }

        /* Ø§Ø³ØªØ§Øª ÙˆÛŒÙˆ */
        .stats-view {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .stat-card {
            background: linear-gradient(145deg, var(--card) 0%, rgba(18, 24, 40, 0.8) 100%);
            border: 1px solid var(--glass-border);
            border-radius: var(--radius);
            padding: 20px;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }

        .stat-card:active {
            transform: translateY(-2px);
            border-color: var(--primary);
        }

        .stat-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 16px;
        }

        .stat-icon {
            width: 44px;
            height: 44px;
            background: linear-gradient(145deg, rgba(0, 102, 255, 0.15) 0%, rgba(0, 212, 170, 0.15) 100%);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--primary);
            font-size: 18px;
            position: relative;
            overflow: hidden;
            flex-shrink: 0;
        }

        .stat-title {
            font-size: 12px;
            color: var(--text-secondary);
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 4px;
        }

        .stat-value {
            font-size: 22px;
            font-weight: 900;
            color: white;
            line-height: 1;
            margin-bottom: 6px;
            display: flex;
            align-items: baseline;
            gap: 6px;
            word-break: break-all;
        }

        /* Ø¨Ø®Ø´ Ù¾Ù†Ù„â€ŒÙ‡Ø§ÛŒ ÙˆÛŒÚ˜Ù‡ ÙØ±ÙˆØ´ SOD */
        .sod-sale-section {
            margin: 60px 0;
        }

        .sale-plans-grid {
            display: flex;
            flex-direction: column;
            gap: 16px;
            margin-top: 24px;
            padding: 0 4px;
        }

        .sale-plan-card {
            background: linear-gradient(145deg, var(--card) 0%, rgba(18, 24, 40, 0.9) 100%);
            border: 1px solid var(--glass-border);
            border-radius: var(--radius-lg);
            padding: 24px 20px;
            position: relative;
            overflow: hidden;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .sale-plan-card:active {
            transform: translateY(-4px);
            border-color: var(--primary);
        }

        .sale-plan-card.featured {
            border: 2px solid var(--primary);
            background: linear-gradient(145deg, var(--card) 0%, rgba(0, 102, 255, 0.15) 100%);
        }

        .sale-plan-badge {
            position: absolute;
            top: 16px;
            left: 16px;
            background: var(--gradient);
            color: white;
            padding: 6px 12px;
            border-radius: 16px;
            font-size: 11px;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            box-shadow: var(--shadow-primary);
        }

        .sale-plan-header {
            text-align: center;
            margin-bottom: 24px;
            padding-top: 8px;
        }

        .sale-plan-name {
            font-size: 20px;
            font-weight: 800;
            color: white;
            margin-bottom: 8px;
        }

        .sale-plan-price {
            font-size: 36px;
            font-weight: 900;
            color: white;
            margin-bottom: 8px;
            line-height: 1;
        }

        .sale-plan-price span {
            font-size: 14px;
            color: var(--text-secondary);
            font-weight: 500;
        }

        .sod-amount {
            font-size: 18px;
            color: var(--primary-light);
            font-weight: 700;
            margin-bottom: 20px;
        }

        .sale-plan-features {
            list-style: none;
            margin-bottom: 24px;
        }

        .sale-plan-features li {
            padding: 8px 0;
            border-bottom: 1px solid var(--glass-border);
            color: var(--text-secondary);
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 13px;
        }

        .sale-plan-features li:last-child {
            border-bottom: none;
        }

        .discount-badge {
            background: linear-gradient(135deg, var(--accent) 0%, #FF5722 100%);
            color: white;
            padding: 4px 10px;
            border-radius: 12px;
            font-size: 11px;
            font-weight: 700;
            display: inline-block;
            margin-right: 8px;
        }

        /* Ù¾Ø§Ø¯Ø§Ø´ USDT */
        .reward-section {
            background: linear-gradient(145deg, #0D1430 0%, #121828 100%);
            border-radius: var(--radius-xl);
            padding: 32px 20px;
            margin: 60px 0;
            border: 1px solid var(--glass-border);
            position: relative;
            overflow: hidden;
            box-shadow: var(--shadow-lg);
        }

        .reward-header {
            display: flex;
            flex-direction: column;
            gap: 16px;
            margin-bottom: 32px;
            position: relative;
            z-index: 2;
        }

        .reward-title {
            font-size: 24px;
            font-weight: 900;
            color: white;
        }

        .reward-subtitle {
            font-size: 14px;
            color: var(--text-secondary);
            line-height: 1.5;
        }

        .reward-card {
            background: linear-gradient(145deg, rgba(38, 161, 123, 0.15) 0%, rgba(0, 212, 170, 0.15) 100%);
            border: 1px solid rgba(38, 161, 123, 0.3);
            border-radius: var(--radius-lg);
            padding: 24px;
            display: flex;
            flex-direction: column;
            gap: 20px;
            margin-bottom: 32px;
            position: relative;
            z-index: 2;
            backdrop-filter: blur(20px);
        }

        .reward-info h3 {
            color: var(--usdt);
            font-size: 18px;
            font-weight: 700;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .reward-amount {
            font-size: 36px;
            font-weight: 900;
            color: var(--usdt);
            line-height: 1;
        }

        /* Ù¾Ø±ÙˆÚ¯Ø±Ø³â€ŒØ¨Ø§Ø± */
        .progress-container {
            margin: 32px 0;
            position: relative;
            z-index: 2;
        }

        .progress-header {
            display: flex;
            flex-direction: column;
            gap: 8px;
            margin-bottom: 12px;
        }

        .progress-label {
            font-size: 13px;
            color: var(--text-secondary);
            font-weight: 600;
        }

        .progress-value {
            font-size: 13px;
            font-weight: 700;
            color: white;
        }

        .progress-bar {
            height: 12px;
            background: var(--glass);
            border-radius: 6px;
            overflow: hidden;
            position: relative;
            box-shadow: inset 0 2px 10px rgba(0, 0, 0, 0.2);
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--primary), var(--usdt));
            border-radius: 6px;
            width: 0%;
            transition: width 0.8s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }

        /* Ø¬Ø¯ÙˆÙ„ ØªØ±Ø§Ú©Ù†Ø´â€ŒÙ‡Ø§ */
        .transactions-section {
            margin: 60px 0;
        }

        .transactions-table {
            background: linear-gradient(145deg, var(--card) 0%, rgba(18, 24, 40, 0.9) 100%);
            border-radius: var(--radius-lg);
            border: 1px solid var(--glass-border);
            overflow: hidden;
            margin-top: 24px;
            box-shadow: var(--shadow);
        }

        .transaction-row {
            padding: 16px;
            border-bottom: 1px solid var(--glass-border);
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .transaction-row:last-child {
            border-bottom: none;
        }

        .transaction-type {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .transaction-icon {
            width: 40px;
            height: 40px;
            background: linear-gradient(145deg, rgba(0, 102, 255, 0.15) 0%, rgba(0, 212, 170, 0.15) 100%);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--primary);
            font-size: 16px;
            flex-shrink: 0;
        }

        /* Ù†ÙˆØªÛŒÙÛŒÚ©ÛŒØ´Ù† */
        .notification {
            position: fixed;
            top: 16px;
            right: 16px;
            left: 16px;
            background: linear-gradient(145deg, var(--card) 0%, rgba(18, 24, 40, 0.95) 100%);
            border: 1px solid var(--glass-border);
            border-radius: var(--radius);
            padding: 16px;
            display: flex;
            align-items: center;
            gap: 16px;
            z-index: 10000;
            transform: translateY(-100px);
            transition: transform 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: var(--shadow-lg);
            backdrop-filter: blur(20px);
        }

        .notification.show {
            transform: translateY(0);
        }

        .notification-icon {
            width: 44px;
            height: 44px;
            background: var(--gradient);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            color: white;
            flex-shrink: 0;
            box-shadow: var(--shadow-primary);
        }

        /* Ø§Ù†ÛŒÙ…ÛŒØ´Ù†â€ŒÙ‡Ø§ */
        @keyframes rotate {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        @keyframes pulse {
            0%, 100% { 
                opacity: 1;
                transform: scale(1);
            }
            50% { 
                opacity: 0.8;
                transform: scale(1.1);
            }
        }

        @keyframes miningEffect {
            0% {
                opacity: 1;
                transform: translate(0, 0) scale(1);
            }
            100% {
                opacity: 0;
                transform: translate(0, -80px) scale(1.2);
            }
        }

        @keyframes usdtEffect {
            0% {
                opacity: 1;
                transform: translate(0, 0) scale(1);
            }
            100% {
                opacity: 0;
                transform: translate(0, -150px) scale(1.5);
            }
        }

        /* Ø§Ø³ØªØ§ÛŒÙ„ Ø¨Ø±Ø§ÛŒ ØªØ¨Ù„Øª */
        @media (min-width: 768px) {
            html {
                font-size: 16px;
            }
            
            .container {
                padding: 0 24px;
                max-width: 768px;
            }
            
            .navbar {
                flex-direction: row;
                justify-content: space-between;
                padding: 20px 0;
            }
            
            .nav-menu {
                flex-direction: row;
                margin-right: 0;
            }
            
            .wallet-section {
                flex-direction: row;
                width: auto;
            }
            
            .wallet-row {
                flex-direction: row;
            }
            
            .wallet-card {
                min-width: 160px;
            }
            
            .section-title {
                font-size: 32px;
            }
            
            .miner-core {
                width: 280px;
                height: 280px;
            }
            
            .miner-controls {
                flex-direction: row;
                flex-wrap: wrap;
            }
            
            .btn {
                width: auto;
                flex: 1;
            }
            
            .stats-view {
                display: grid;
                grid-template-columns: repeat(2, 1fr);
                gap: 16px;
            }
            
            .sale-plans-grid {
                display: grid;
                grid-template-columns: repeat(2, 1fr);
                gap: 20px;
            }
            
            .reward-card {
                flex-direction: row;
            }
        }

        @media (max-width: 768px) {
            .nav-text {
                display: none;
            }
            .nav-menu {
                gap: 5px;
            }
            .nav-menu a {
                padding: 5px 8px;
                font-size: 11px;
            }
        }

        @media (min-width: 992px) {
            .container {
                max-width: 1200px;
                padding: 0 32px;
            }
            
            .miner-container {
                display: grid;
                grid-template-columns: 1.2fr 0.8fr;
                gap: 40px;
            }
            
            .sale-plans-grid {
                grid-template-columns: repeat(4, 1fr);
            }
        }
    </style>
</head>
<body>
    <!-- ØµÙØ­Ù‡ Ø«Ø¨Øª Ù†Ø§Ù… -->
    <div class="register-overlay" id="registerOverlay">
        <div class="register-container">
            <div class="register-header">
                <div class="register-icon">â›ï¸</div>
                <h1 class="register-title">Ø«Ø¨Øª Ù†Ø§Ù… Ø¯Ø± SODmAX</h1>
                <p class="register-subtitle">Ø¨Ø±Ø§ÛŒ Ø´Ø±ÙˆØ¹ Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ùˆ Ø¯Ø±ÛŒØ§ÙØª Ù¾Ø§Ø¯Ø§Ø´ USDT Ø«Ø¨Øª Ù†Ø§Ù… Ú©Ù†ÛŒØ¯</p>
            </div>

            <form id="registerForm">
                <div class="form-group">
                    <label class="form-label">Ù†Ø§Ù… Ùˆ Ù†Ø§Ù… Ø®Ø§Ù†ÙˆØ§Ø¯Ú¯ÛŒ</label>
                    <input type="text" class="form-input" placeholder="Ù…Ø«Ø§Ù„: Ø¹Ù„ÛŒ Ù…Ø­Ù…Ø¯ÛŒ" id="fullName" required>
                </div>

                <div class="form-group">
                    <label class="form-label">Ø§ÛŒÙ…ÛŒÙ„</label>
                    <input type="email" class="form-input" placeholder="example@gmail.com" id="email" required>
                </div>

                <div class="form-group">
                    <label class="form-label">Ø±Ù…Ø² Ø¹Ø¨ÙˆØ±</label>
                    <input type="password" class="form-input" placeholder="Ø­Ø¯Ø§Ù‚Ù„ Û¶ Ú©Ø§Ø±Ø§Ú©ØªØ±" id="password" required minlength="6">
                </div>

                <button type="submit" class="btn btn-primary" id="registerSubmitBtn">
                    <i class="fas fa-user-plus"></i>
                    Ø«Ø¨Øª Ù†Ø§Ù… Ùˆ Ø´Ø±ÙˆØ¹ Ø§Ø³ØªØ®Ø±Ø§Ø¬
                </button>

                <div style="text-align: center; margin-top: 20px;">
                    <p style="color: var(--text-secondary); font-size: 12px;">
                        Ù‚Ø¨Ù„Ø§Ù‹ Ø­Ø³Ø§Ø¨ Ø¯Ø§Ø±ÛŒØ¯ØŸ 
                        <a href="#" onclick="showLoginForm()" style="color: var(--primary-light);">ÙˆØ§Ø±Ø¯ Ø´ÙˆÛŒØ¯</a>
                    </p>
                    <p style="color: var(--text-secondary); font-size: 11px; margin-top: 10px;">
                        Ø¨Ø§ Ø«Ø¨Øª Ù†Ø§Ù…ØŒ <a href="#" onclick="showTerms()" style="color: var(--primary-light);">Ù‚ÙˆØ§Ù†ÛŒÙ† Ùˆ Ø´Ø±Ø§ÛŒØ·</a> Ø±Ø§ Ù…ÛŒâ€ŒÙ¾Ø°ÛŒØ±ÛŒØ¯
                    </p>
                </div>
            </form>
        </div>
    </div>

    <!-- Ú©Ø§Ù†ØªÛŒÙ†Ø± Ø§ØµÙ„ÛŒ -->
    <div class="container" id="mainContainer" style="display: none;">
        <!-- Ù†Ø§ÙˆØ¨Ø±ÛŒ -->
        <nav class="navbar">
            <div class="nav-background"></div>
            
            <a href="#" class="logo">
                <div class="logo-icon">â›ï¸</div>
                <div class="logo-text">
                    <div class="logo-title">SODmAX Pro</div>
                    <div class="logo-subtitle">Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ù‡ÙˆØ´Ù…Ù†Ø¯ â€¢ Ù¾Ø§Ø¯Ø§Ø´ ÙˆØ§Ù‚Ø¹ÛŒ</div>
                </div>
            </a>

            <!-- Ù…Ù†ÙˆÛŒ navigation -->
            <div class="nav-menu">
                <a href="dashboard.html">
                    <i class="fas fa-chart-line"></i>
                    <span class="nav-text">Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯</span>
                </a>
                <a href="leaderboard.html">
                    <i class="fas fa-trophy"></i>
                    <span class="nav-text">Ù„ÛŒØ¯Ø±Ø¨Ø±Ø¯</span>
                </a>
                <a href="missions.html">
                    <i class="fas fa-tasks"></i>
                    <span class="nav-text">Ù…Ø£Ù…ÙˆØ±ÛŒØªâ€ŒÙ‡Ø§</span>
                </a>
                <!-- Ù„ÛŒÙ†Ú© Ù…Ø¯ÛŒØ±ÛŒØª - ÙÙ‚Ø· Ø¨Ø±Ø§ÛŒ Ø§Ø¯Ù…ÛŒÙ† Ù†Ù…Ø§ÛŒØ´ Ø¯Ø§Ø¯Ù‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯ -->
                <a href="admin.html" id="adminLink" style="display: none; background: rgba(148,163,184,0.3);">
                    <i class="fas fa-user-shield"></i>
                    <span class="nav-text">Ù…Ø¯ÛŒØ±ÛŒØª</span>
                </a>
            </div>

            <div class="wallet-section">
                <div class="wallet-row">
                    <div class="wallet-card">
                        <div class="wallet-label">
                            <i class="fas fa-coins"></i>
                            Ù…ÙˆØ¬ÙˆØ¯ÛŒ SOD
                        </div>
                        <div class="wallet-amount" id="sodBalance">Û° <span>SOD</span></div>
                    </div>
                    
                    <div class="wallet-card">
                        <div class="wallet-label">
                            <i class="fas fa-gem"></i>
                            Ù…ÙˆØ¬ÙˆØ¯ÛŒ USDT
                        </div>
                        <div class="wallet-amount" id="usdtBalance">Û° <span>USDT</span></div>
                    </div>
                </div>
                
                <button class="btn btn-primary" onclick="showSODSale()">
                    <i class="fas fa-shopping-cart"></i>
                    Ø®Ø±ÛŒØ¯ SOD
                </button>
            </div>
        </nav>

        <!-- Ø¨Ø®Ø´ Ù…Ø§ÛŒÙ†Ø± -->
        <section class="miner-section">
            <div class="section-header">
                <h1 class="section-title">Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ù‡ÙˆØ´Ù…Ù†Ø¯ SOD</h1>
                <p class="section-subtitle">
                    Ø¨Ø§ Ù¾ÛŒØ´Ø±ÙØªÙ‡â€ŒØªØ±ÛŒÙ† Ø³ÛŒØ³ØªÙ… Ø§Ø³ØªØ®Ø±Ø§Ø¬ ÙˆØ¨Û³ØŒ Ù‡Ø± Ú©Ù„ÛŒÚ© Ø´Ù…Ø§ <span class="highlight">SOD</span> ØªÙˆÙ„ÛŒØ¯ Ù…ÛŒâ€ŒÚ©Ù†Ø¯.
                    Ù‡Ø± <span class="highlight">Û±Û° Ù…ÛŒÙ„ÛŒÙˆÙ† SOD</span> Ù…Ø¹Ø§Ø¯Ù„ <span class="highlight">Û°.Û°Û± USDT (Û± Ø³ÙÙ†Øª)</span> Ù¾Ø±Ø¯Ø§Ø®Øª Ù…ÛŒâ€ŒØ´ÙˆØ¯.
                </p>
            </div>

            <div class="miner-container">
                <!-- Ù…Ø§ÛŒÙ†Ø± ÙˆÛŒÙˆ -->
                <div class="miner-view">
                    <div class="miner-display">
                        <div class="miner-core" id="minerCore">
                            <div class="core-inner">
                                <div class="core-content">
                                    <div class="core-icon">âš¡</div>
                                    <div class="click-reward" id="clickReward">+Û±Û°Û° SOD</div>
                                    <div class="click-label">Ø¨Ø±Ø§ÛŒ Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ú©Ù„ÛŒÚ© Ú©Ù†ÛŒØ¯</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="miner-controls">
                        <button class="btn btn-primary" id="autoMineBtn">
                            <i class="fas fa-robot"></i>
                            Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ø®ÙˆØ¯Ú©Ø§Ø±
                        </button>
                        <button class="btn btn-outline" onclick="showSODSale()">
                            <i class="fas fa-shopping-cart"></i>
                            Ø®Ø±ÛŒØ¯ SOD
                        </button>
                        <button class="btn btn-success" onclick="boostMining()">
                            <i class="fas fa-bolt"></i>
                            Ø§ÙØ²Ø§ÛŒØ´ Ù‚Ø¯Ø±Øª
                        </button>
                    </div>
                </div>

                <!-- Ø§Ø³ØªØ§Øª ÙˆÛŒÙˆ -->
                <div class="stats-view">
                    <div class="stat-card">
                        <div class="stat-header">
                            <div class="stat-icon">
                                <i class="fas fa-chart-line"></i>
                            </div>
                            <div class="stat-info">
                                <div class="stat-title">Ø¯Ø±Ø¢Ù…Ø¯ Ø§Ù…Ø±ÙˆØ²</div>
                                <div class="stat-value" id="todayEarnings">Û° SOD</div>
                            </div>
                        </div>
                    </div>

                    <div class="stat-card">
                        <div class="stat-header">
                            <div class="stat-icon">
                                <i class="fas fa-bolt"></i>
                            </div>
                            <div class="stat-info">
                                <div class="stat-title">Ù‚Ø¯Ø±Øª Ø§Ø³ØªØ®Ø±Ø§Ø¬</div>
                                <div class="stat-value" id="miningPower">Û±Û°x</div>
                            </div>
                        </div>
                    </div>

                    <div class="stat-card">
                        <div class="stat-header">
                            <div class="stat-icon">
                                <i class="fas fa-users"></i>
                            </div>
                            <div class="stat-info">
                                <div class="stat-title">Ù…Ø§ÛŒÙ†Ø±Ù‡Ø§ÛŒ ÙØ¹Ø§Ù„</div>
                                <div class="stat-value">Û¸,Û´Û²Û±</div>
                            </div>
                        </div>
                    </div>

                    <div class="stat-card">
                        <div class="stat-header">
                            <div class="stat-icon">
                                <i class="fas fa-network-wired"></i>
                            </div>
                            <div class="stat-info">
                                <div class="stat-title">Ú©Ù„ Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ø´Ø¨Ú©Ù‡</div>
                                <div class="stat-value">Û²Û´.ÛµM SOD</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Ø¨Ø®Ø´ Ù¾Ù†Ù„â€ŒÙ‡Ø§ÛŒ ÙˆÛŒÚ˜Ù‡ ÙØ±ÙˆØ´ SOD -->
        <section class="sod-sale-section" id="sodSaleSection" style="display: none;">
            <div class="section-header">
                <h2 class="section-title">ğŸ›’ Ù¾Ù†Ù„â€ŒÙ‡Ø§ÛŒ ÙˆÛŒÚ˜Ù‡ ÙØ±ÙˆØ´ SOD</h2>
                <p class="section-subtitle">
                    SOD Ø¨ÛŒØ´ØªØ±ÛŒ Ø®Ø±ÛŒØ¯Ø§Ø±ÛŒ Ú©Ù†ÛŒØ¯ Ùˆ Ø³Ø±Ø¹Øª Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ø®ÙˆØ¯ Ø±Ø§ Ø§ÙØ²Ø§ÛŒØ´ Ø¯Ù‡ÛŒØ¯. Ù‡Ø± Ù¾Ù†Ù„ Ø´Ø§Ù…Ù„ Ù…Ø²Ø§ÛŒØ§ÛŒ ÙˆÛŒÚ˜Ù‡â€ŒØ§ÛŒ Ø§Ø³Øª.
                </p>
            </div>

            <div class="sale-plans-grid" id="salePlansGrid">
                <!-- Ù¾Ù†Ù„â€ŒÙ‡Ø§ Ø¨Ø§ JS Ø³Ø§Ø®ØªÙ‡ Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯ -->
            </div>
        </section>

        <!-- Ø¨Ø®Ø´ Ù¾Ø§Ø¯Ø§Ø´ USDT -->
        <section class="reward-section">
            <div class="reward-header">
                <div>
                    <h2 class="reward-title">ğŸ Ù¾Ø§Ø¯Ø§Ø´ USDT ÙˆØ§Ù‚Ø¹ÛŒ</h2>
                    <p class="reward-subtitle">Ù‡Ø± Û±Û° Ù…ÛŒÙ„ÛŒÙˆÙ† SOD Ù…Ø¹Ø§Ø¯Ù„ <span class="highlight">Û°.Û°Û± USDT (Û± Ø³ÙÙ†Øª)</span> Ù¾Ø±Ø¯Ø§Ø®Øª Ù…ÛŒâ€ŒØ´ÙˆØ¯.</p>
                </div>
                <button class="btn btn-success" id="claimUSDTBtn">
                    <i class="fas fa-gift"></i>
                    Ø¯Ø±ÛŒØ§ÙØª Ù¾Ø§Ø¯Ø§Ø´
                </button>
            </div>

            <div class="reward-card">
                <div class="reward-info">
                    <h3><i class="fas fa-wallet"></i> Ù…ÙˆØ¬ÙˆØ¯ÛŒ USDT Ø´Ù…Ø§</h3>
                    <div class="reward-amount" id="availableUSDT">Û° USDT</div>
                </div>
                <div class="reward-info">
                    <h3><i class="fas fa-bullseye"></i> ØªØ§ Ù¾Ø§Ø¯Ø§Ø´ Ø¨Ø¹Ø¯ÛŒ</h3>
                    <div class="reward-amount" id="nextReward">Û°.Û°Û± USDT</div>
                </div>
            </div>

            <div class="progress-container">
                <div class="progress-header">
                    <div class="progress-label">Ù¾ÛŒØ´Ø±ÙØª ÙØ¹Ù„ÛŒ</div>
                    <div class="progress-value" id="progressText">Û° / Û±Û°,Û°Û°Û°,Û°Û°Û° SOD (Û°.Û°Û± USDT)</div>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill"></div>
                </div>
            </div>

            <div class="stats-view">
                <div class="stat-card">
                    <div class="stat-header">
                        <div class="stat-icon">
                            <i class="fas fa-calendar-alt"></i>
                        </div>
                        <div class="stat-info">
                            <div class="stat-title">Ø¢Ø®Ø±ÛŒÙ† Ø¯Ø±ÛŒØ§ÙØª</div>
                            <div class="stat-value" id="lastClaimTime">Ù‡Ù†ÙˆØ² Ø¯Ø±ÛŒØ§ÙØª Ù†Ú©Ø±Ø¯Ù‡â€ŒØ§ÛŒØ¯</div>
                        </div>
                    </div>
                </div>
                
                <div class="stat-card">
                    <div class="stat-header">
                        <div class="stat-icon">
                            <i class="fas fa-trophy"></i>
                        </div>
                        <div class="stat-info">
                            <div class="stat-title">Ø³Ø·Ø­ Ø´Ù…Ø§</div>
                            <div class="stat-value" id="userLevel">Û±</div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Ø¬Ø¯ÙˆÙ„ ØªØ±Ø§Ú©Ù†Ø´â€ŒÙ‡Ø§ -->
        <section class="transactions-section">
            <div class="section-header">
                <h2 class="section-title">ğŸ“‹ ØªØ§Ø±ÛŒØ®Ú†Ù‡ ØªØ±Ø§Ú©Ù†Ø´â€ŒÙ‡Ø§</h2>
                <p class="section-subtitle">Ù†Ù…Ø§ÛŒØ´ ØªÙ…Ø§Ù…ÛŒ ÙØ¹Ø§Ù„ÛŒØªâ€ŒÙ‡Ø§ÛŒ Ø§Ø³ØªØ®Ø±Ø§Ø¬ØŒ Ø®Ø±ÛŒØ¯ Ùˆ ØªØ±Ø§Ú©Ù†Ø´â€ŒÙ‡Ø§ÛŒ Ø´Ù…Ø§</p>
            </div>

            <div class="transactions-table">
                <div id="transactionsList">
                    <!-- ØªØ±Ø§Ú©Ù†Ø´â€ŒÙ‡Ø§ Ø¨Ø§ JS Ø³Ø§Ø®ØªÙ‡ Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯ -->
                </div>
            </div>
        </section>
    </div>

    <!-- Ù†ÙˆØªÛŒÙÛŒÚ©ÛŒØ´Ù† -->
    <div class="notification" id="notification">
        <div class="notification-icon">
            <i class="fas fa-check"></i>
        </div>
        <div class="notification-content">
            <h4 id="notificationTitle">Ø¹Ù…Ù„ÛŒØ§Øª Ù…ÙˆÙÙ‚</h4>
            <p id="notificationMessage">Ù¾ÛŒØ§Ù… Ù†Ù…Ø§ÛŒØ´ Ø¯Ø§Ø¯Ù‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯</p>
        </div>
    </div>

    <!-- ÙØ§ÛŒÙ„â€ŒÙ‡Ø§ÛŒ JavaScript -->
    <script src="supabase-config.js"></script>
    <script src="database-manager.js"></script>

    <script>
        // Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ Ø¨Ø§Ø²ÛŒ
        const gameData = {
            sodBalance: 0,
            usdtBalance: 0,
            todayEarnings: 0,
            miningPower: 10,
            userLevel: 1,
            usdtProgress: 0,
            autoMining: false,
            transactions: [],
            boostActive: false,
            boostEndTime: 0,
            lastClaimTime: null,
            totalMined: 0,
            registerDate: new Date().toLocaleDateString('fa-IR')
        };

        // ==================== ØªØ§Ø¨Ø¹â€ŒÙ‡Ø§ÛŒ Ø§ØµÙ„ÛŒ ====================
        async function init() {
            console.log('ğŸš€ Initializing SODmAX Pro...');
            
            // Ø±Ø§Ù‡â€ŒØ§Ù†Ø¯Ø§Ø²ÛŒ DatabaseManager
            await DB.init();
            
            // Ø¨Ø±Ø±Ø³ÛŒ ÙˆØ¶Ø¹ÛŒØª Ú©Ø§Ø±Ø¨Ø±
            const user = await SupabaseAPI.getCurrentUser();
            
            if (user) {
                // Ú©Ø§Ø±Ø¨Ø± Ù„Ø§Ú¯ÛŒÙ† Ú©Ø±Ø¯Ù‡
                console.log('âœ… User logged in:', user.email);
                hideRegister();
                showGame();
                await loadUserData(user.id);
                updateUI();
                
                // Ø¨Ø±Ø±Ø³ÛŒ Ø¯Ø³ØªØ±Ø³ÛŒ Ø§Ø¯Ù…ÛŒÙ†
                await checkAdminAccess(user.id);
            } else {
                // Ú©Ø§Ø±Ø¨Ø± Ù„Ø§Ú¯ÛŒÙ† Ù†Ú©Ø±Ø¯Ù‡
                console.log('â„¹ï¸ No user logged in, showing registration');
                showRegister();
            }
            
            // Ø±Ù†Ø¯Ø± Ù¾Ù†Ù„â€ŒÙ‡Ø§ÛŒ ÙØ±ÙˆØ´
            renderSODSalePlans();
            
            console.log('âœ… SODmAX Pro initialized successfully');
        }

        // Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ú©Ø§Ø±Ø¨Ø±
        async function loadUserData(userId) {
            try {
                console.log('ğŸ”„ Loading user data...');
                
                // Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø¨Ø§Ø²ÛŒ
                const gameDataResult = await SupabaseAPI.getUserGameData(userId);
                if (gameDataResult) {
                    gameData.sodBalance = gameDataResult.sod_balance || 0;
                    gameData.usdtBalance = gameDataResult.usdt_balance || 0;
                }
                
                // Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ù¾Ø±ÙˆÙØ§ÛŒÙ„ Ú©Ø§Ù…Ù„
                const fullProfile = await SupabaseAPI.getUserFullProfile(userId);
                if (fullProfile) {
                    gameData.userLevel = fullProfile.user_profiles[0]?.user_level || 1;
                    gameData.miningPower = fullProfile.user_profiles[0]?.mining_power || 10;
                    gameData.totalMined = fullProfile.user_profiles[0]?.total_mined || 0;
                    
                    // Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ ÙØ¹Ø§Ù„ÛŒØª Ø§Ù…Ø±ÙˆØ²
                    const today = new Date().toISOString().split('T')[0];
                    const { data: todayActivity } = await SupabaseAPI.supabase
                        .from('daily_activities')
                        .select('mined_today')
                        .eq('user_id', userId)
                        .eq('activity_date', today)
                        .single();
                    
                    gameData.todayEarnings = todayActivity?.mined_today || 0;
                }
                
                console.log('âœ… User data loaded');
                return true;
                
            } catch (error) {
                console.error('âŒ Error loading user data:', error);
                return false;
            }
        }

        // Ø«Ø¨Øª Ù†Ø§Ù… ÙØ±Ù…
        document.getElementById('registerForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            e.stopPropagation();
            
            // ØºÛŒØ±ÙØ¹Ø§Ù„ Ú©Ø±Ø¯Ù† Ø¯Ú©Ù…Ù‡ Ø«Ø¨Øªâ€ŒÙ†Ø§Ù…
            const submitBtn = document.getElementById('registerSubmitBtn');
            submitBtn.disabled = true;
            submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Ø¯Ø± Ø­Ø§Ù„ Ø«Ø¨Øªâ€ŒÙ†Ø§Ù…...';
            
            const fullName = document.getElementById('fullName').value.trim();
            const email = document.getElementById('email').value.trim().toLowerCase();
            const password = document.getElementById('password').value;
            
            // Ø§Ø¹ØªØ¨Ø§Ø±Ø³Ù†Ø¬ÛŒ
            if (!fullName || !email || !password) {
                showNotification('Ø®Ø·Ø§', 'Ù„Ø·ÙØ§Ù‹ ØªÙ…Ø§Ù… ÙÛŒÙ„Ø¯Ù‡Ø§ Ø±Ø§ Ù¾Ø± Ú©Ù†ÛŒØ¯', 'error');
                submitBtn.disabled = false;
                submitBtn.innerHTML = '<i class="fas fa-user-plus"></i> Ø«Ø¨Øª Ù†Ø§Ù… Ùˆ Ø´Ø±ÙˆØ¹ Ø§Ø³ØªØ®Ø±Ø§Ø¬';
                return;
            }
            
            if (password.length < 6) {
                showNotification('Ø®Ø·Ø§', 'Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± Ø¨Ø§ÛŒØ¯ Ø­Ø¯Ø§Ù‚Ù„ Û¶ Ú©Ø§Ø±Ø§Ú©ØªØ± Ø¨Ø§Ø´Ø¯', 'error');
                submitBtn.disabled = false;
                submitBtn.innerHTML = '<i class="fas fa-user-plus"></i> Ø«Ø¨Øª Ù†Ø§Ù… Ùˆ Ø´Ø±ÙˆØ¹ Ø§Ø³ØªØ®Ø±Ø§Ø¬';
                return;
            }
            
            if (!validateEmail(email)) {
                showNotification('Ø®Ø·Ø§', 'Ù„Ø·ÙØ§Ù‹ ÛŒÚ© Ø§ÛŒÙ…ÛŒÙ„ Ù…Ø¹ØªØ¨Ø± ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯', 'error');
                submitBtn.disabled = false;
                submitBtn.innerHTML = '<i class="fas fa-user-plus"></i> Ø«Ø¨Øª Ù†Ø§Ù… Ùˆ Ø´Ø±ÙˆØ¹ Ø§Ø³ØªØ®Ø±Ø§Ø¬';
                return;
            }
            
            console.log('ğŸ”„ Starting registration process...');
            
            try {
                // Ø«Ø¨Øª Ù†Ø§Ù… Ú©Ø§Ø±Ø¨Ø±
                const result = await SupabaseAPI.signUpUser(email, password, fullName);
                
                if (result.success) {
                    // Ù†Ù…Ø§ÛŒØ´ Ù¾ÛŒØ§Ù… Ù…ÙˆÙÙ‚ÛŒØª
                    showNotification('ğŸ‰ Ø«Ø¨Øªâ€ŒÙ†Ø§Ù… Ù…ÙˆÙÙ‚', result.message, 'success');
                    
                    // Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ú©Ø§Ø±Ø¨Ø±
                    await loadUserData(result.user.id);
                    
                    // Ù¾Ù†Ù‡Ø§Ù† Ú©Ø±Ø¯Ù† ÙØ±Ù… Ùˆ Ù†Ù…Ø§ÛŒØ´ Ø¨Ø§Ø²ÛŒ
                    setTimeout(() => {
                        hideRegister();
                        showGame();
                        updateUI();
                        
                        // Ø¨Ø±Ø±Ø³ÛŒ Ø¯Ø³ØªØ±Ø³ÛŒ Ø§Ø¯Ù…ÛŒÙ†
                        checkAdminAccess(result.user.id);
                        
                        // Ù†Ù…Ø§ÛŒØ´ Ø±Ø§Ù‡Ù†Ù…Ø§ÛŒ Ø´Ø±ÙˆØ¹
                        setTimeout(() => {
                            showNotification('ğŸš€ Ø´Ø±ÙˆØ¹ Ú©Ù†ÛŒØ¯', 'Ø±ÙˆÛŒ Ø¯Ú©Ù…Ù‡ Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ú©Ù„ÛŒÚ© Ú©Ù†ÛŒØ¯ Ùˆ SOD Ú©Ø³Ø¨ Ú©Ù†ÛŒØ¯!', 'info');
                        }, 1000);
                        
                    }, 1500);
                    
                } else {
                    // Ù†Ù…Ø§ÛŒØ´ Ø®Ø·Ø§
                    showNotification('âŒ Ø®Ø·Ø§ Ø¯Ø± Ø«Ø¨Øªâ€ŒÙ†Ø§Ù…', result.error, 'error');
                    submitBtn.disabled = false;
                    submitBtn.innerHTML = '<i class="fas fa-user-plus"></i> Ø«Ø¨Øª Ù†Ø§Ù… Ùˆ Ø´Ø±ÙˆØ¹ Ø§Ø³ØªØ®Ø±Ø§Ø¬';
                }
                
            } catch (error) {
                console.error('ğŸ”¥ Unexpected registration error:', error);
                showNotification('âš¡ Ø®Ø·Ø§ÛŒ Ø³ÛŒØ³ØªÙ…', 'Ù…Ø´Ú©Ù„ÛŒ Ø¯Ø± Ø§Ø±ØªØ¨Ø§Ø· Ø¨Ø§ Ø³Ø±ÙˆØ± Ù¾ÛŒØ´ Ø¢Ù…Ø¯Ù‡. Ù„Ø·ÙØ§Ù‹ Ø¯ÙˆØ¨Ø§Ø±Ù‡ ØªÙ„Ø§Ø´ Ú©Ù†ÛŒØ¯.', 'error');
                submitBtn.disabled = false;
                submitBtn.innerHTML = '<i class="fas fa-user-plus"></i> Ø«Ø¨Øª Ù†Ø§Ù… Ùˆ Ø´Ø±ÙˆØ¹ Ø§Ø³ØªØ®Ø±Ø§Ø¬';
            }
        });

        // Ú©Ù„ÛŒÚ© Ø¨Ø±Ø§ÛŒ Ø§Ø³ØªØ®Ø±Ø§Ø¬
        document.getElementById('minerCore').addEventListener('click', async function() {
            console.log('â›ï¸ Mining click detected');
            
            // Ø¨Ø±Ø±Ø³ÛŒ Ù„Ø§Ú¯ÛŒÙ† Ú©Ø§Ø±Ø¨Ø±
            const user = await SupabaseAPI.getCurrentUser();
            if (!user) {
                showNotification('âš ï¸ Ù†ÛŒØ§Ø² Ø¨Ù‡ ÙˆØ±ÙˆØ¯', 'Ù„Ø·ÙØ§Ù‹ Ø§Ø¨ØªØ¯Ø§ Ø«Ø¨Øª Ù†Ø§Ù… ÛŒØ§ ÙˆØ§Ø±Ø¯ Ø´ÙˆÛŒØ¯', 'warning');
                showRegister();
                return;
            }
            
            // Ù…Ø­Ø§Ø³Ø¨Ù‡ Ù…Ù‚Ø¯Ø§Ø± Ø§Ø³ØªØ®Ø±Ø§Ø¬
            let earned = gameData.miningPower;
            if (gameData.boostActive) {
                earned *= 3;
            }
            
            // Ø§ÙÚ©Øª Ú©Ù„ÛŒÚ©
            this.style.transform = 'scale(0.95)';
            setTimeout(() => {
                this.style.transform = 'scale(1)';
            }, 150);
            
            // Ø«Ø¨Øª Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ø¯Ø± Ø¯ÛŒØªØ§Ø¨ÛŒØ³
            const result = await SupabaseAPI.recordMining(user.id, earned);
            
            if (result.success) {
                // Ø¢Ù¾Ø¯ÛŒØª Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ Ù…Ø­Ù„ÛŒ
                gameData.sodBalance = result.newBalance;
                gameData.todayEarnings += earned;
                gameData.totalMined += earned;
                gameData.usdtProgress += earned;
                
                // Ø§ÛŒØ¬Ø§Ø¯ Ø§ÙÚ©Øª Ù…ØªÙ†
                createMiningEffect(earned);
                
                // Ø¨Ø±Ø±Ø³ÛŒ Ù¾Ø§Ø¯Ø§Ø´ USDT
                checkUSDT();
                
                // Ø¢Ù¾Ø¯ÛŒØª UI
                updateUI();
                
                // Ù†Ù…Ø§ÛŒØ´ Ù¾ÛŒØ§Ù… Ù…ÙˆÙÙ‚ÛŒØª
                setTimeout(() => {
                    showNotification('â›ï¸ Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ù…ÙˆÙÙ‚', result.message, 'success');
                }, 300);
                
            } else {
                showNotification('âŒ Ø®Ø·Ø§', 'Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ø«Ø¨Øª Ù†Ø´Ø¯. Ù„Ø·ÙØ§Ù‹ Ø¯ÙˆØ¨Ø§Ø±Ù‡ ØªÙ„Ø§Ø´ Ú©Ù†ÛŒØ¯', 'error');
            }
        });

        // Ø¨Ø±Ø±Ø³ÛŒ Ù¾Ø§Ø¯Ø§Ø´ USDT
        async function checkUSDT() {
            if (gameData.usdtProgress >= 10000000) {
                let usdtEarned = 0.01;
                let sodUsed = 10000000;
                
                const user = await SupabaseAPI.getCurrentUser();
                if (user) {
                    try {
                        // Ø¢Ù¾Ø¯ÛŒØª Ù…ÙˆØ¬ÙˆØ¯ÛŒâ€ŒÙ‡Ø§ Ø¯Ø± Ø¯ÛŒØªØ§Ø¨ÛŒØ³
                        await SupabaseAPI.supabase
                            .from('user_balances')
                            .update({
                                sod_balance: gameData.sodBalance - sodUsed,
                                usdt_balance: SupabaseAPI.supabase.raw('usdt_balance + ' + usdtEarned)
                            })
                            .eq('user_id', user.id);
                        
                        // Ø¢Ù¾Ø¯ÛŒØª Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ Ù…Ø­Ù„ÛŒ
                        gameData.usdtBalance += usdtEarned;
                        gameData.usdtProgress -= sodUsed;
                        gameData.lastClaimTime = new Date().toLocaleString('fa-IR');
                        
                        // Ø«Ø¨Øª ØªØ±Ø§Ú©Ù†Ø´ USDT
                        await SupabaseAPI.supabase
                            .from('transactions')
                            .insert([{
                                user_id: user.id,
                                transaction_type: 'usdt_reward',
                                amount: usdtEarned,
                                currency: 'USDT',
                                description: `Ù¾Ø§Ø¯Ø§Ø´ USDT Ø¨Ø±Ø§ÛŒ ${formatNumber(sodUsed)} SOD`,
                                created_at: new Date().toISOString()
                            }]);
                        
                        // Ù†Ù…Ø§ÛŒØ´ Ù†ÙˆØªÛŒÙÛŒÚ©ÛŒØ´Ù†
                        showNotification('ğŸ‰ Ù¾Ø§Ø¯Ø§Ø´ USDT', `${usdtEarned.toFixed(4)} USDT Ø¯Ø±ÛŒØ§ÙØª Ú©Ø±Ø¯ÛŒØ¯!`, 'success');
                        
                        // Ø´Ø§Ù†Ø³ Ø§Ø±ØªÙ‚Ø§Ø¡ Ø³Ø·Ø­
                        if (Math.random() > 0.85) {
                            gameData.userLevel++;
                            gameData.miningPower = 10 * gameData.userLevel;
                            
                            // Ø¢Ù¾Ø¯ÛŒØª Ø³Ø·Ø­ Ø¯Ø± Ø¯ÛŒØªØ§Ø¨ÛŒØ³
                            await SupabaseAPI.supabase
                                .from('user_profiles')
                                .update({
                                    user_level: gameData.userLevel,
                                    mining_power: gameData.miningPower
                                })
                                .eq('user_id', user.id);
                            
                            showNotification('â­ Ø§Ø±ØªÙ‚Ø§Ø¡ Ø³Ø·Ø­', `Ø³Ø·Ø­ Ø´Ù…Ø§ Ø¨Ù‡ ${gameData.userLevel} Ø§Ø±ØªÙ‚Ø§Ø¡ ÛŒØ§ÙØª!`, 'success');
                        }
                        
                        // Ø¢Ù¾Ø¯ÛŒØª UI
                        updateUI();
                        
                    } catch (error) {
                        console.error('âŒ Error processing USDT reward:', error);
                    }
                }
            }
        }

        // Ø¯Ø±ÛŒØ§ÙØª USDT
        document.getElementById('claimUSDTBtn').addEventListener('click', async function() {
            if (gameData.usdtBalance > 0) {
                showConfirmationModal(
                    'Ø¯Ø±ÛŒØ§ÙØª Ù¾Ø§Ø¯Ø§Ø´ USDT',
                    `Ø¢ÛŒØ§ Ù…Ø§ÛŒÙ„ Ø¨Ù‡ Ø¯Ø±ÛŒØ§ÙØª ${gameData.usdtBalance.toFixed(4)} USDT Ù‡Ø³ØªÛŒØ¯ØŸ\n\nØ§ÛŒÙ† Ø¹Ù…Ù„ÛŒØ§Øª Ø¯Ø± Ù†Ø³Ø®Ù‡ Ø¢Ø²Ù…Ø§ÛŒØ´ÛŒ Ù‚Ø§Ø¨Ù„ Ø§Ù†Ø¬Ø§Ù… Ù†ÛŒØ³Øª.`,
                    () => {
                        showNotification('ØªÙˆØ¬Ù‡', 'Ø¯Ø±ÛŒØ§ÙØª USDT Ø¯Ø± Ù†Ø³Ø®Ù‡ Ø¢Ø²Ù…Ø§ÛŒØ´ÛŒ ØºÛŒØ±ÙØ¹Ø§Ù„ Ø§Ø³Øª', 'info');
                    }
                );
            } else {
                showNotification('ğŸ’° Ø§Ø¯Ø§Ù…Ù‡ Ø§Ø³ØªØ®Ø±Ø§Ø¬', 'Ù‡Ù†ÙˆØ² USDT Ù¾Ø§Ø¯Ø§Ø´ Ø¯Ø±ÛŒØ§ÙØª Ù†Ú©Ø±Ø¯Ù‡â€ŒØ§ÛŒØ¯.', 'info');
            }
        });

        // Ø¢Ù¾Ø¯ÛŒØª UI
        function updateUI() {
            // Ù…ÙˆØ¬ÙˆØ¯ÛŒâ€ŒÙ‡Ø§
            document.getElementById('sodBalance').innerHTML = formatNumber(gameData.sodBalance) + ' <span>SOD</span>';
            document.getElementById('usdtBalance').innerHTML = gameData.usdtBalance.toFixed(4) + ' <span>USDT</span>';
            
            // Ø¢Ù…Ø§Ø±
            document.getElementById('todayEarnings').textContent = formatNumber(gameData.todayEarnings) + ' SOD';
            document.getElementById('miningPower').textContent = gameData.miningPower + 'x';
            document.getElementById('clickReward').textContent = '+' + gameData.miningPower + ' SOD';
            document.getElementById('userLevel').textContent = gameData.userLevel;
            
            // Ù¾Ø§Ø¯Ø§Ø´ USDT
            document.getElementById('availableUSDT').textContent = gameData.usdtBalance.toFixed(4) + ' USDT';
            document.getElementById('nextReward').textContent = 'Û°.Û°Û± USDT';
            
            const progressPercent = (gameData.usdtProgress / 10000000) * 100;
            document.getElementById('progressFill').style.width = progressPercent + '%';
            document.getElementById('progressText').textContent = formatNumber(gameData.usdtProgress) + ' / Û±Û°,Û°Û°Û°,Û°Û°Û° SOD (Û°.Û°Û± USDT)';
            
            // Ø¢Ø®Ø±ÛŒÙ† Ø¯Ø±ÛŒØ§ÙØª
            if (gameData.lastClaimTime) {
                document.getElementById('lastClaimTime').textContent = gameData.lastClaimTime;
            }
            
            // Ø¯Ú©Ù…Ù‡ Ø¯Ø±ÛŒØ§ÙØª
            const claimBtn = document.getElementById('claimUSDTBtn');
            if (gameData.usdtBalance > 0) {
                claimBtn.disabled = false;
                claimBtn.style.opacity = '1';
            } else {
                claimBtn.disabled = true;
                claimBtn.style.opacity = '0.7';
            }
            
            // Ø¯Ú©Ù…Ù‡ Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ø®ÙˆØ¯Ú©Ø§Ø±
            const autoBtn = document.getElementById('autoMineBtn');
            if (gameData.sodBalance >= 1000000) {
                autoBtn.disabled = false;
                autoBtn.style.opacity = '1';
                autoBtn.innerHTML = '<i class="fas fa-robot"></i> Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ø®ÙˆØ¯Ú©Ø§Ø±';
            } else {
                autoBtn.disabled = true;
                autoBtn.style.opacity = '0.7';
                autoBtn.innerHTML = '<i class="fas fa-robot"></i> Ù†ÛŒØ§Ø² Ø¨Ù‡ Û±M SOD';
            }
            
            // ØªØ±Ø§Ú©Ù†Ø´â€ŒÙ‡Ø§
            renderTransactions();
        }

        // Ø±Ù†Ø¯Ø± ØªØ±Ø§Ú©Ù†Ø´â€ŒÙ‡Ø§
        async function renderTransactions() {
            const list = document.getElementById('transactionsList');
            const user = await SupabaseAPI.getCurrentUser();
            
            if (!user) {
                list.innerHTML = '<div style="padding: 20px; text-align: center; color: var(--text-secondary)">Ù„Ø·ÙØ§Ù‹ ÙˆØ§Ø±Ø¯ Ø´ÙˆÛŒØ¯</div>';
                return;
            }
            
            try {
                // Ø¯Ø±ÛŒØ§ÙØª ØªØ±Ø§Ú©Ù†Ø´â€ŒÙ‡Ø§ÛŒ Ú©Ø§Ø±Ø¨Ø±
                const { data: transactions, error } = await SupabaseAPI.supabase
                    .from('transactions')
                    .select('*')
                    .eq('user_id', user.id)
                    .order('created_at', { ascending: false })
                    .limit(10);
                
                if (error) throw error;
                
                if (!transactions || transactions.length === 0) {
                    list.innerHTML = '<div style="padding: 20px; text-align: center; color: var(--text-secondary)">Ù‡Ù†ÙˆØ² ØªØ±Ø§Ú©Ù†Ø´ÛŒ Ø«Ø¨Øª Ù†Ú©Ø±Ø¯Ù‡â€ŒØ§ÛŒØ¯</div>';
                    return;
                }
                
                let html = '';
                transactions.forEach(tx => {
                    let icon = 'â›ï¸';
                    let amount = '+' + formatNumber(tx.amount) + ' ' + tx.currency;
                    let amountClass = 'positive';
                    
                    if (tx.transaction_type === 'usdt_reward') {
                        icon = 'ğŸ’°';
                        amount = '+' + tx.amount + ' ' + tx.currency;
                    } else if (tx.transaction_type === 'registration_bonus') {
                        icon = 'ğŸ';
                        amount = '+' + formatNumber(tx.amount) + ' ' + tx.currency;
                    }
                    
                    const time = new Date(tx.created_at).toLocaleTimeString('fa-IR');
                    const date = new Date(tx.created_at).toLocaleDateString('fa-IR');
                    
                    html += `
                        <div class="transaction-row">
                            <div class="transaction-type">
                                <div class="transaction-icon">${icon}</div>
                                <div style="flex: 1;">
                                    <div style="font-weight: bold;">${tx.description}</div>
                                    <div style="color: var(--text-secondary); font-size: 12px;">${date} ${time}</div>
                                </div>
                                <div style="font-weight: bold; color: ${amountClass === 'positive' ? 'var(--primary-light)' : 'var(--error)'}">
                                    ${amount}
                                </div>
                            </div>
                        </div>
                    `;
                });
                
                list.innerHTML = html;
                
            } catch (error) {
                console.error('Error rendering transactions:', error);
                list.innerHTML = '<div style="padding: 20px; text-align: center; color: var(--text-secondary)">Ø®Ø·Ø§ Ø¯Ø± Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ ØªØ±Ø§Ú©Ù†Ø´â€ŒÙ‡Ø§</div>';
            }
        }

        // Ø±Ù†Ø¯Ø± Ù¾Ù†Ù„â€ŒÙ‡Ø§ÛŒ ÙØ±ÙˆØ´ SOD
        function renderSODSalePlans() {
            const grid = document.getElementById('salePlansGrid');
            if (!grid) return;
            
            const plans = [
                {
                    id: 1,
                    name: "Ù¾Ù†Ù„ Ø§Ø³ØªØ§Ø±ØªØ±",
                    price: 1,
                    sod: 5000000,
                    features: ["Ûµ,Û°Û°Û°,Û°Û°Û° SOD", "Ù‡Ø¯ÛŒÙ‡ ÛµÛ°Û°,Û°Û°Û° SOD Ø§Ø¶Ø§ÙÛŒ", "Ù‚Ø¯Ø±Øª Ø§Ø³ØªØ®Ø±Ø§Ø¬ +ÛµÙª"],
                    featured: false
                },
                {
                    id: 2,
                    name: "Ù¾Ù†Ù„ Ù¾Ø±Ùˆ",
                    price: 5,
                    sod: 30000000,
                    features: ["Û³Û°,Û°Û°Û°,Û°Û°Û° SOD", "Ù‡Ø¯ÛŒÙ‡ Û³,Û°Û°Û°,Û°Û°Û° SOD", "Ù‚Ø¯Ø±Øª Ø§Ø³ØªØ®Ø±Ø§Ø¬ +Û±ÛµÙª", "Ø¯Ø³ØªØ±Ø³ÛŒ Ø¨Ù‡ Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ø®ÙˆØ¯Ú©Ø§Ø±"],
                    featured: true
                },
                {
                    id: 3,
                    name: "Ù¾Ù†Ù„ Ù¾Ù„Ø§ØªÛŒÙ†ÛŒÙˆÙ…",
                    price: 15,
                    sod: 100000000,
                    features: ["Û±Û°Û°,Û°Û°Û°,Û°Û°Û° SOD", "Ù‡Ø¯ÛŒÙ‡ Û±Û°,Û°Û°Û°,Û°Û°Û° SOD", "Ù‚Ø¯Ø±Øª Ø§Ø³ØªØ®Ø±Ø§Ø¬ +Û³Û°Ùª", "Ø¯Ø³ØªØ±Ø³ÛŒ Ø¨Ù‡ Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ø®ÙˆØ¯Ú©Ø§Ø±", "Ø¯Ø±ÛŒØ§ÙØª Ø±ÙˆØ²Ø§Ù†Ù‡ Ù¾Ø§Ø¯Ø§Ø´ SOD"],
                    featured: false
                }
            ];
            
            let html = '';
            plans.forEach(plan => {
                html += `
                    <div class="sale-plan-card ${plan.featured ? 'featured' : ''}">
                        ${plan.featured ? '<div class="sale-plan-badge">Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯ ÙˆÛŒÚ˜Ù‡</div>' : ''}
                        <div class="sale-plan-header">
                            <h3 class="sale-plan-name">${plan.name}</h3>
                            <div class="sale-plan-price">${plan.price} <span>USDT</span></div>
                            <div class="sod-amount">${formatNumber(plan.sod)} SOD</div>
                        </div>
                        <ul class="sale-plan-features">
                            ${plan.features.map(feature => `<li><i class="fas fa-check" style="color: var(--success);"></i> ${feature}</li>`).join('')}
                        </ul>
                        <button class="btn ${plan.featured ? 'btn-warning' : 'btn-primary'}" onclick="buySODPlan(${plan.id})">
                            <i class="fas fa-shopping-cart"></i>
                            Ø®Ø±ÛŒØ¯ Ù¾Ù†Ù„
                        </button>
                    </div>
                `;
            });
            
            grid.innerHTML = html;
        }

        // Ø®Ø±ÛŒØ¯ Ù¾Ù†Ù„ SOD
        function buySODPlan(planId) {
            showNotification('ØªÙˆØ¬Ù‡', 'Ø³ÛŒØ³ØªÙ… Ø®Ø±ÛŒØ¯ Ø¯Ø± Ù†Ø³Ø®Ù‡ Ø¢Ø²Ù…Ø§ÛŒØ´ÛŒ ØºÛŒØ±ÙØ¹Ø§Ù„ Ø§Ø³Øª', 'info');
        }

        // Ø§ÙØ²Ø§ÛŒØ´ Ù‚Ø¯Ø±Øª
        function boostMining() {
            if (gameData.sodBalance >= 5000) {
                gameData.sodBalance -= 5000;
                gameData.boostActive = true;
                gameData.boostEndTime = Date.now() + (30 * 60 * 1000);
                
                showNotification('âš¡ Ø§ÙØ²Ø§ÛŒØ´ Ù‚Ø¯Ø±Øª', 'Ù‚Ø¯Ø±Øª Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ø´Ù…Ø§ Û³ Ø¨Ø±Ø§Ø¨Ø± Ø´Ø¯! (Û³Û° Ø¯Ù‚ÛŒÙ‚Ù‡)', 'success');
                
                // ØªØ§ÛŒÙ…Ø± Ø¨Ø±Ø§ÛŒ Ù¾Ø§ÛŒØ§Ù† Ø¨ÙˆØ³Øª
                setTimeout(() => {
                    gameData.boostActive = false;
                    showNotification('Ù¾Ø§ÛŒØ§Ù† Ø¨ÙˆØ³Øª', 'Ø²Ù…Ø§Ù† Ø§ÙØ²Ø§ÛŒØ´ Ù‚Ø¯Ø±Øª Ø¨Ù‡ Ù¾Ø§ÛŒØ§Ù† Ø±Ø³ÛŒØ¯.', 'info');
                }, 30 * 60 * 1000);
                
                updateUI();
            } else {
                showNotification('âš ï¸ Ù…ÙˆØ¬ÙˆØ¯ÛŒ Ú©Ø§ÙÛŒ Ù†ÛŒØ³Øª', 'Ø¨Ø±Ø§ÛŒ Ø§ÙØ²Ø§ÛŒØ´ Ù‚Ø¯Ø±Øª Ø¨Ù‡ ÛµÛ°Û°Û° SOD Ù†ÛŒØ§Ø² Ø¯Ø§Ø±ÛŒØ¯.', 'error');
            }
        }

        // Ø¨Ø±Ø±Ø³ÛŒ Ø¯Ø³ØªØ±Ø³ÛŒ Ø§Ø¯Ù…ÛŒÙ†
        async function checkAdminAccess(userId) {
            try {
                const profile = await SupabaseAPI.getUserFullProfile(userId);
                if (profile && profile.is_admin) {
                    document.getElementById('adminLink').style.display = 'flex';
                    console.log('âœ… Admin access activated');
                }
            } catch (error) {
                console.log('âš ï¸ Error checking admin access:', error);
            }
        }

        // Ù†Ù…Ø§ÛŒØ´ Ø«Ø¨Øª Ù†Ø§Ù…
        function showRegister() {
            document.getElementById('registerOverlay').style.display = 'flex';
            document.getElementById('mainContainer').style.display = 'none';
        }

        // Ù…Ø®ÙÛŒ Ú©Ø±Ø¯Ù† Ø«Ø¨Øª Ù†Ø§Ù…
        function hideRegister() {
            document.getElementById('registerOverlay').style.display = 'none';
            document.getElementById('mainContainer').style.display = 'block';
        }

        // Ù†Ù…Ø§ÛŒØ´ Ø¨Ø§Ø²ÛŒ
        function showGame() {
            document.getElementById('mainContainer').style.display = 'block';
        }

        // Ø§ÛŒØ¬Ø§Ø¯ Ø§ÙÚ©Øª Ø§Ø³ØªØ®Ø±Ø§Ø¬
        function createMiningEffect(amount) {
            const effect = document.createElement('div');
            effect.style.cssText = `
                position: fixed;
                color: var(--primary-light);
                font-weight: 900;
                font-size: 16px;
                pointer-events: none;
                z-index: 10000;
                text-shadow: 0 0 10px var(--primary);
                animation: miningEffect 1s ease-out forwards;
            `;
            
            const core = document.getElementById('minerCore');
            const rect = core.getBoundingClientRect();
            effect.style.left = rect.left + rect.width / 2 + 'px';
            effect.style.top = rect.top + rect.height / 2 + 'px';
            effect.textContent = '+' + formatNumber(amount);
            
            document.body.appendChild(effect);
            
            setTimeout(() => effect.remove(), 1000);
        }

        // ÙØ±Ù…Øª Ø¹Ø¯Ø¯
        function formatNumber(num) {
            if (num >= 1000000000) {
                return (num / 1000000000).toFixed(2) + 'B';
            }
            if (num >= 1000000) {
                return (num / 1000000).toFixed(1) + 'M';
            }
            if (num >= 1000) {
                return (num / 1000).toFixed(1) + 'K';
            }
            return Math.floor(num).toLocaleString('fa-IR');
        }

        // Ù†Ù…Ø§ÛŒØ´ Ù†ÙˆØªÛŒÙÛŒÚ©ÛŒØ´Ù†
        function showNotification(title, message, type = 'success') {
            const notification = document.getElementById('notification');
            const icon = notification.querySelector('.notification-icon i');
            
            // ØªÙ†Ø¸ÛŒÙ… Ø¢ÛŒÚ©ÙˆÙ† Ø¨Ø± Ø§Ø³Ø§Ø³ Ù†ÙˆØ¹
            if (type === 'error') {
                icon.className = 'fas fa-times';
                notification.style.borderLeft = '4px solid var(--error)';
            } else if (type === 'warning') {
                icon.className = 'fas fa-exclamation-triangle';
                notification.style.borderLeft = '4px solid var(--warning)';
            } else if (type === 'info') {
                icon.className = 'fas fa-info-circle';
                notification.style.borderLeft = '4px solid var(--primary)';
            } else {
                icon.className = 'fas fa-check';
                notification.style.borderLeft = '4px solid var(--success)';
            }
            
            document.getElementById('notificationTitle').textContent = title;
            document.getElementById('notificationMessage').textContent = message;
            
            notification.classList.add('show');
            
            setTimeout(() => {
                notification.classList.remove('show');
            }, 4000);
        }

        // Ù…ÙˆØ¯Ø§Ù„ ØªØ§ÛŒÛŒØ¯
        function showConfirmationModal(title, message, onConfirm) {
            if (window.confirm(`${title}\n\n${message}`)) {
                onConfirm();
            }
        }

        // Ù†Ù…Ø§ÛŒØ´ Ù‚ÙˆØ§Ù†ÛŒÙ†
        function showTerms() {
            alert('ğŸ“œ Ù‚ÙˆØ§Ù†ÛŒÙ† Ùˆ Ø´Ø±Ø§ÛŒØ· Ø§Ø³ØªÙØ§Ø¯Ù‡\n\nÛ±. Ú©Ø§Ø±Ø¨Ø± Ù…ØªØ¹Ù‡Ø¯ Ù…ÛŒâ€ŒØ´ÙˆØ¯ Ø§Ø·Ù„Ø§Ø¹Ø§Øª ØµØ­ÛŒØ­ ÙˆØ§Ø±Ø¯ Ú©Ù†Ø¯.\nÛ². Ù‡Ø± Ú©Ø§Ø±Ø¨Ø± ÙÙ‚Ø· ÛŒÚ© Ø­Ø³Ø§Ø¨ Ù…ÛŒâ€ŒØªÙˆØ§Ù†Ø¯ Ø¯Ø§Ø´ØªÙ‡ Ø¨Ø§Ø´Ø¯.\nÛ³. Ù…Ø³Ø¦ÙˆÙ„ÛŒØª Ø­ÙØ¸ Ø§Ù…Ù†ÛŒØª Ø­Ø³Ø§Ø¨ Ø¨Ø§ Ú©Ø§Ø±Ø¨Ø± Ø§Ø³Øª.\nÛ´. Ù†Ø±Ø®â€ŒÙ‡Ø§ Ù…Ù…Ú©Ù† Ø§Ø³Øª ØªØºÛŒÛŒØ± Ú©Ù†Ù†Ø¯.');
        }

        // Ø§Ø¹ØªØ¨Ø§Ø±Ø³Ù†Ø¬ÛŒ Ø§ÛŒÙ…ÛŒÙ„
        function validateEmail(email) {
            const re = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            return re.test(email);
        }

        // Ù†Ù…Ø§ÛŒØ´ ÙØ±Ù… ÙˆØ±ÙˆØ¯
        function showLoginForm() {
            showNotification('ØªÙˆØ¬Ù‡', 'Ø¯Ø± Ø§ÛŒÙ† Ù†Ø³Ø®Ù‡ ÙÙ‚Ø· Ø«Ø¨Øª Ù†Ø§Ù… Ø¬Ø¯ÛŒØ¯ ÙØ¹Ø§Ù„ Ø§Ø³Øª. Ù„Ø·ÙØ§Ù‹ Ø«Ø¨Øª Ù†Ø§Ù… Ú©Ù†ÛŒØ¯.', 'info');
        }

        // Ù†Ù…Ø§ÛŒØ´ Ø¨Ø®Ø´ ÙØ±ÙˆØ´ SOD
        function showSODSale() {
            document.getElementById('sodSaleSection').style.display = 'block';
            document.getElementById('sodSaleSection').scrollIntoView({ 
                behavior: 'smooth',
                block: 'start'
            });
        }

        // Ø±Ø§Ù‡â€ŒØ§Ù†Ø¯Ø§Ø²ÛŒ
        window.addEventListener('DOMContentLoaded', init);
        
        // Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ø®ÙˆØ¯Ú©Ø§Ø± UI Ù‡Ø± 10 Ø«Ø§Ù†ÛŒÙ‡
        setInterval(async () => {
            const user = await SupabaseAPI.getCurrentUser();
            if (user) {
                await loadUserData(user.id);
                updateUI();
            }
        }, 10000);
    </script>
</body>
</html>
<script type="module">
  import { registerUser, loginUser, getCurrentUser } from './supabase-client.js'
  
  // Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² ØªÙˆØ§Ø¨Ø¹
  console.log('SODmAX Pro Ready!')
</script>
